# 타입 좁히기 

+ 조건문 등을 이용해 넓은타입에서 좁은타입으로
+ 타입을 상황에 따라 좁히는 방법

```
function func(value:number | string) {
    
}
```

매개변수(value) 의 타입을 number ,string 두 타입의 조건을 하나라도 만족하는 union 타입으로 지정하기

```
function func(value:number | string) {
    if(typeof value === 'number') {
        console.log(value.toFixed())
    } 
    else if (typeof value === 'string'){
        console.log(value.toUpperCase())
    }
}
```

위 함수는 value의 타입이 number 일 경우 toFixed메소드가 작동되어 출력하고 

value의 타입이 string일 경우 
toUpperCase 메소드가 작동되어 출력하는 기능을 하는 함수 이다 

if 조건문에서는 value의 타입이 number 타입으로 보장이되는 기능이 발동되고 있다 

이기능이 타입 좁히기 이다 

## 타입 가드

type of 연산자 같이 조건문과 함께 타입을 좁힐 수 있는 이런표현들을 타입 가드라고 함ㅈ

### 대표적으로 사용되는 타입가드

instanceof 

+ A instanceof B

A가 B의 인스턴스냐? 라고 물어보는 연산자 

맞으면 true 아니면 false 를 반환한다

```
function func(value:number | string | Date | null) {
    if(typeof value === 'number') {
        console.log(value.toFixed())
    } 
    else if (typeof value === 'string'){
        console.log(value.toUpperCase())
    }
    else if (value instanceof Date) {
        console.log(value.getTime())
    }
}
```

주의 instanceof 는  A 가 B라는 클래스의 인스턴스인지 확인하는 연산자 이다 

위에서 사용한 Date 는 자바스크립트의 내장 class 이기때문에 사용이 가능하다 

예시
타입 별칭을 사용해서 새로운 타입을 정의 하고 매개변수의 union 타입으로 지정해보자 
```
type Person = {
    name:string
    age:number
}
```

```
...
else if (value instanceof Person) { //error
        console.log()
    }
```

Person은 class 가 아닌 우리가 만든 *객체 타입이다
그렇기에 instanceof 뒤에 사용하려 하면 에러가 발생한다 

그럴떄는 in 연산자를 사용한다 

```
else if ('age' in value) { //error
        console.log() 
    }
```

하지만 다시 에러가 발생한다 이유는

in 연산자 뒤에 오는 값에는 null,undefined이 들어가면 안되기 때문

value가 null 이 아님을 밝혀주기위해서 

```
else if (value && 'age' in value) {
        console.log()
    }
```

andand 연산자를 이용해서 value가 있다 라고 알려주는 과정이 필요하다

이제 출력하고자하는 걸 출력해보면
```
else if (value && 'age' in value) {
        console.log(`${value.name}은 ${value.age}살 입니다`)
    }

func({name: 'sean', age: 29})
```

정상적으로 잘 출력되는걸 볼 수 있다 
```
sean은 29살 입니다
```

